% UTC-Beamer
% Outer theme file (Headers, footers, numbering, sidebars)

\def\beamer@themeouter@true{true}
\def\beamer@themeouter@false{false}
\def\beamer@themeouter@vertical{vertical}
\def\beamer@themeouter@withsecplan{false}
\def\beamer@themeouter@navigation{false}

\DeclareOptionBeamer{navigation}{\def\beamer@themeouter@navigation{#1}}
\DeclareOptionBeamer{withsecplan}{\def\beamer@themeouter@withsecplan{#1}}
\ProcessOptionsBeamer

\mode<presentation>

% Header of a frame
\setbeamertemplate{frametitle}{
  \vskip-1pt
  \begin{beamercolorbox}[center, wd=\textwidth, ht=0.1\paperheight]{structure}
    \raisebox{-8pt}{\insertframetitle}
    \rule{\textwidth}{1pt}
  \end{beamercolorbox}
}

% Footer of a frame (A footline in this case)
\setbeamertemplate{footline}{

  \hfill
  \begin{beamercolorbox}[center, wd=8.8cm,ht=.4cm]{inverted structure}%
      \makebox[8.7cm][l]{
        \usebeamerfont{page number in head/foot}
        \insertshorttitle{}
        \ifx\insertsection\@empty
        \relax
        \else
        ~\fg~\insertsection
        \fi
        \hfill
        \insertframenumber{} / \inserttotalframenumber
      }
      
      \vskip2pt

    \end{beamercolorbox}
    \hfill\hfill
    
    \hfill\hfill\hfill
    \makebox[2cm][l]{
      \raisebox{-2pt}[-5pt]{\includegraphics[scale=0.2]{sigle.png}}
    }
    
  \vskip4pt
}

% Make covered items semi-transparent instead of fully hidden
\beamertemplatetransparentcovered

% Hide navigation symbols if navigation=false
\ifx\beamer@themeouter@navigation\beamer@themeouter@false
  \setbeamertemplate{navigation symbols}{}
\fi

% Use vertical navigation symbols if navigation=vertical
\ifx\beamer@themeouter@navigation\beamer@themeouter@vertical
  \setbeamertemplate{navigation symbols}[vertical]
\fi

% Show a table of contents slide at each new section if withsecplan=true
\ifx\beamer@themeouter@withsecplan\beamer@themeouter@true
  \AtBeginSection[]{
    \begin{frame}<beamer>
      \frametitle{Plan}
      \tableofcontents[currentsection]
    \end{frame}
  }
\fi

% Return to processing all modes (not just presentation)
\mode<all>
