% UTC-Beamer
% Main theme file

% Define beamer variables
\def\beamer@theme@true{true}
\def\beamer@theme@false{false}
\def\beamer@theme@withsecplan{false}
\def\beamer@theme@navigation{false}
\def\beamer@theme@utcrecherche{false}
\def\beamer@theme@pinkie{false}
\def\beamer@theme@rounded{true}
\def\beamer@theme@shadowed{false}

% Set posibles options
\DeclareOptionBeamer{navigation}{\def\beamer@theme@navigation{#1}}
\DeclareOptionBeamer{withsecplan}{\def\beamer@theme@withsecplan{#1}}
\DeclareOptionBeamer{utcrecherche}{\def\beamer@theme@utcrecherche{#1}}
\DeclareOptionBeamer{pinkie}{\def\beamer@theme@pinkie{#1}}
\DeclareOptionBeamer{rounded}{\def\beamer@theme@rounded{#1}}
\DeclareOptionBeamer{shadowed}{\def\beamer@theme@shadowed{#1}}
\ProcessOptionsBeamer

\mode<presentation>

\useoutertheme[navigation=\beamer@theme@navigation,withsecplan=\beamer@theme@withsecplan]{utc}
\useinnertheme[rounded=\beamer@theme@rounded,shadowed=\beamer@theme@shadowed]{utc}

\usecolortheme{utc} % the color theme defined in 'beamercolorthemeutc.sty'

\mode<all>

\def\hilite<#1>{%
  \temporal<#1>{\color{lightgray}}%
  {\color{utcrose}}%
  {\color{charcoal}}
}

\def\@email{}
\def\email#1{\def\@email{#1}}

% Class code (Called UV at UTC)
\def\@uv{}
\def\uv#1{\def\@uv{#1}}

% Semester
\def\@semester{}
\def\semester#1{\def\@semester{#1}}

% UTC Logo
\newcommand{\logoutc}[1]{\includegraphics[#1]{utc_su_logo.png}}
\newcommand{\logoutctext}{UNIVERSITÉ DE TECHNOLOGIE DE COMPIÈGNE}

% Command to insert properly the semester
\newcommand{\insertuvsemester}{
  \ifx\@uv\@empty
    \relax
  \else
    \@uv
    \ifx\@semester\@empty
      \\
    \else
      ~---
    \fi
  \fi
  \ifx\@semester\@empty
    \relax
  \else
    \@semester\\
  \fi
}

% Title page of the beamer
\newcommand{\utctitlepage}{
  \raisebox{-11pt}[0pt]{\logoutc{width=3cm}}
  \usebeamercolor{inverted structure}
  \begin{center}
    \vfill
    \Huge{\inserttitle}\\
    \ifx\insertsubtitle\@empty
    \relax
    \else
    \vspace{.3cm}
    \Large{\insertsubtitle}\\
    \fi
    \vspace{.5cm}
    \usebeamercolor[fg]{structure}
    \large{\textbf{\insertauthor}}\\
    \usebeamercolor[fg]{inverted structure}
    \begin{footnotesize}
      \vspace{.5cm}
      \ifx\insertinstitute\@empty
        \relax
      \else
        \insertinstitute\\
      \fi
      \insertuvsemester
      \insertdate
    \end{footnotesize}
    \vfill
  \end{center}
}

% End page of the beamer
\newcommand{\utcthankspage}[1][Thanks]{
  \raisebox{-11pt}[0pt]{\logoutc{width=3cm}}
  \usebeamercolor{inverted structure}
  \begin{center}
    \vfill
    \Huge{#1}\\
    \vspace{.5cm}
    \usebeamercolor[fg]{structure}
    \large{\textbf{\insertauthor}}\\
    \usebeamercolor[fg]{inverted structure}
    \ifx\@email\@empty
      \relax
    \else
      \vspace{.3cm}
      \large{\@email}\\
    \fi
    \vspace{.5cm}
    \begin{footnotesize}
      \inserttitle
      \ifx\insertsubtitle\@empty
        \relax
      \else
        ~---~\insertsubtitle
      \fi\\
      \vspace{.5cm}
      \insertuvsemester
      \insertdate
    \end{footnotesize}
    \vfill
  \end{center}
}
