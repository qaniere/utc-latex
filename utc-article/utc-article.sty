\ProvidesPackage{utc-article}

\RequirePackage[left=2.5cm,top=2cm,right=2cm,bottom=3cm,]{geometry}

% For A4 format printing
\DeclareOption{a4book}{%
  \PassOptionsToPackage{%
    a4paper,
    top=2.5cm,
    bottom=2cm,
    left=3cm,
    right=2cm,
    asymmetric,
    marginparwidth=1.2cm
  }{geometry}%
  \linespread{1.4}%
  \setlength{\decallagetitre}{1cm}}

% For e-book publication
\DeclareOption{pocketbook}{%
  \PassOptionsToPackage{%
    paperwidth=80mm,
    paperheight=104mm,
    top=3mm,
    bottom=3mm,
    includeheadfoot,
    asymmetric,
    left=1cm,
    right=3mm,
    marginparwidth=1.2cm
  }{geometry}%
  \linespread{1.4}%
  \setlength{\decallagetitre}{5mm}}

\ProcessOptions

% Accented char support
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}

% Colors definitions
\RequirePackage[table,usenames,dvipsnames]{xcolor}
\definecolor{orange}{RGB}{250,108,0}
\definecolor{darkgreen}{RGB}{155,187,89}
\definecolor{lightgreen}{RGB}{239,243,234}
\definecolor{othergreen}{RGB}{100,155,61}
\definecolor{darkred}{RGB}{204,0,0}
\definecolor{charcoal}{RGB}{28,28,28}
\definecolor{jauneutc}{RGB}{255,217,17}
\definecolor{grayutc}{RGB}{117,115,120}
\definecolor{boxcodecolor}{RGB}{250,241,212}
\definecolor{fboxcodecolor}{RGB}{183,146,20}
\definecolor{boxdefcolor}{RGB}{229,235,242}
\definecolor{fboxdefcolor}{RGB}{52,77,108}

% Configure PDF printing
\RequirePackage{hyperref}
\hypersetup{
  colorlinks=false,
  pdfborder={0 0 0},
  breaklinks=true,
  bookmarksopen=true,
  pdfproducer={LaTeX with package UTClatex}
}
\AtBeginDocument{
  \hypersetup{
    pdftitle={\@title},
    pdfauthor={\@author}
  }
}

% Add command with space at the end
\RequirePackage{xspace}

% Figures handling
\RequirePackage{graphicx}

% URL without blue color
\RequirePackage{url}
\urlstyle{sf}

% Footer and header
\RequirePackage{fancyhdr}
\RequirePackage{lettrine}

% The € symbol
\RequirePackage{eurosym}

% Custom macros and variables for UTC

% UV
\def\@uv{Non renseigné~!}
\def\uv#1{\def\@uv{#1}}

% Semester
\def\@semestre{Non renseigné~!}
\def\semestre#1{\def\@semestre{#1}}

% Branch
\def\@branche{Non renseigné~!}
\def\branche#1{\def\@branche{#1}}

% Applicable major, master's track, or specialization
\def\@filiere{~}
\def\filiere#1{\def\@filiere{#1}}

% Applicable major, master's track, or specialization, second line
\def\@specialite{~}
\def\specialite#1{\def\@specialite{#1}}

% UTC Logo
\newcommand{\logoutc}[1]{\includegraphics[#1]{utc.png}}

% UTC logo as text
\newcommand{\logoutctext}{{\large\textsc{Université de Technologie de Compiègne}}}

% Footer and header
\pagestyle{fancy}
\fancyhf{}

% Layout
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{5pt}%
\renewcommand{\footrule}{%
  {\color{jauneutc}%
    \hrule width\headwidth height\footrulewidth \vskip+\footrulewidth}
}

\fancyhead[L]{\logoutc{height=1cm}}
\fancyhead[R]{}

\fancyfoot[L]{\footnotesize{\textit{\@author\\\@uv}}}
\fancyfoot[C]{\thepage}
\fancyfoot[R]{\footnotesize{\textit{\@title}}}


% Custom commands
\newcommand{\titrearticle}{
  \begin{center}
    \vfill
    {\Huge\@title}\\
    \vspace{0.5cm}
    {\large\textit{\@author}\\\vspace{0.5cm}\@date}\\
    \normalsize{\@uv~---~\@semestre}
    \vspace{1cm}
  \end{center}
}

% Sections layout
\renewcommand\section{\@startsection {section}{1}{-1\decallagetitre}%
  {-3.5ex \@plus -1ex \@minus -.2ex}%
  {2.3ex \@plus.2ex}%
  {\normalfont\Large\bfseries}}

\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
  {-3.25ex\@plus -1ex \@minus -.2ex}%
  {1.5ex \@plus .2ex}%
  {\normalfont\large\bfseries}}

\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
  {-3.25ex\@plus -1ex \@minus -.2ex}%
  {1.5ex \@plus .2ex}%
  {\normalfont\normalsize\bfseries}}

\endinput
