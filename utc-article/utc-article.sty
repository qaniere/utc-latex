\ProvidesPackage{utc-article}

% Define document dimensions
\RequirePackage[left=1.5cm,top=2cm,right=1.5cm,bottom=2cm,]{geometry} 

% Import colors from "utc-common"
\usepackage{utc_colors}

% For A4 format printing
\DeclareOption{a4book}{%
  \PassOptionsToPackage{%
    a4paper,
    top=2.5cm,
    bottom=2cm,
    left=3cm,
    right=2cm,
    asymmetric,
    marginparwidth=1.2cm
  }{geometry}%
  \linespread{1.4}%
  \setlength{\titleoffset}{1cm}}

% For e-book publication
\DeclareOption{pocketbook}{%
  \PassOptionsToPackage{%
    paperwidth=80mm,
    paperheight=104mm,
    top=3mm,
    bottom=3mm,
    includeheadfoot,
    asymmetric,
    left=1cm,
    right=3mm,
    marginparwidth=1.2cm
  }{geometry}%
  \linespread{1.4}%
  \setlength{\titleoffset}{5mm}}

\ProcessOptions

% Accented char support
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}


% Configure PDF printing
\RequirePackage{hyperref}
\hypersetup{
  colorlinks=false,
  pdfborder={0 0 0},
  breaklinks=true,
  bookmarksopen=true,
  pdfproducer={LaTeX with package UTClatex}
}
\AtBeginDocument{
  \hypersetup{
    pdftitle={\@title},
    pdfauthor={\@author}
  }
}

% Add command with space at the end
\RequirePackage{xspace}

% Figures handling
\RequirePackage{graphicx}
\usepackage{float} % Allow to place figures in multicols

% URL without blue color
\RequirePackage{url}
\urlstyle{sf}

% Footer and header
\RequirePackage{fancyhdr}
\RequirePackage{lettrine}

% The € symbol
\RequirePackage{eurosym}

% Custom macros and variables for UTC

% UV
\def\@uv{Non renseigné~!}
\def\uv#1{\def\@uv{#1}}

% Semester
\def\@semester{Non renseigné~!}
\def\semester#1{\def\@semester{#1}}

% Branch
\def\@branche{Non renseigné~!}
\def\branche#1{\def\@branche{#1}}

% Applicable major, master's track, or specialization
\def\@filiere{~}
\def\filiere#1{\def\@filiere{#1}}

% Applicable major, master's track, or specialization, second line
\def\@specialite{~}
\def\specialite#1{\def\@specialite{#1}}

% UTC Logo
\newcommand{\logoutc}[1]{\includegraphics[#1]{utc_su_logo.png}}

% UTC logo as text
\newcommand{\logoutctext}{{\large\textsc{Université de Technologie de Compiègne}}}

% Footer and header
\pagestyle{fancy}
\fancyhf{}

% Layout
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{5pt}%
\renewcommand{\footrule}{%
  {\color{utcyellow}%
    \hrule width\headwidth height\footrulewidth \vskip+\footrulewidth}
}

\fancyhead[L]{\logoutc{height=1cm}}
\fancyhead[R]{}

\fancyfoot[L]{\footnotesize{\textit{\@author\\\@uv}}}
\fancyfoot[C]{\thepage}
\fancyfoot[R]{\footnotesize{\textit{\@title}}}


% Custom commands
\newcommand{\articletitle}{
  \begin{center}
    \vfill
    {\Huge\@title}\\
    \vspace{0.5cm}
    {\large\textit{\@author}\\\vspace{0.5cm}\@date}\\
    \normalsize{\@uv~---~\@semester}
  \end{center}
}

% Default offset for section title if no option was passed
\providecommand{\titleoffset}{0cm}

% Sections layout
\renewcommand\section{\@startsection {section}{1}{-1\titleoffset}%
  {-3.5ex \@plus -1ex \@minus -.2ex}%
  {2.3ex \@plus.2ex}%
  {\normalfont\Large\bfseries}}

\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
  {-3.25ex\@plus -1ex \@minus -.2ex}%
  {1.5ex \@plus .2ex}%
  {\normalfont\large\bfseries}}

\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
  {-3.25ex\@plus -1ex \@minus -.2ex}%
  {1.5ex \@plus .2ex}%
  {\normalfont\normalsize\bfseries}}

\endinput
